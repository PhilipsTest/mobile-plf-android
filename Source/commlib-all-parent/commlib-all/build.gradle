/*
 * Copyright (c) Koninklijke Philips N.V., 2016
 * All rights reserved.
 */

apply plugin: 'com.android.library'
apply plugin: 'com.jfrog.artifactory-upload'
apply plugin: 'com.github.dcendents.android-maven'
apply plugin: 'cdpSCM'

import com.philips.cdp.cdpSCM

def objcdp = new cdpSCM()
objcdp.setProjectDir(projectDir)

group = 'com.philips.cdp2'
version = objcdp.getVersion()

artifactory {
    contextUrl = 'http://maartens-mini.ddns.htc.nl.philips.com:8081/artifactory'
    publish {
        repository {
            repoKey = objcdp.getArtifactoryRepoKey('android')
            username = objcdp.getArtifactoryUploadUser()
            password = objcdp.getArtifactoryUploadPwd()
            defaults {
                publishPom = true
                publishIvy = false
                publishBuildInfo = true
            }
        }
    }
    resolve {
        repository {
            repoKey = 'libs-release-local-android'
        }
    }
}

android {
    compileSdkVersion _compileSdkVersion
    buildToolsVersion _buildToolsVersion

    defaultConfig {
        minSdkVersion _minSdkVersion
        targetSdkVersion _targetSdkVersion
        versionCode _versionCode
        versionName version

        consumerProguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
    }

    buildTypes {
        debug {
            buildConfigField "String", "LIBRARY_VERSION", "\"${objcdp.getVersionWithHash()}\""
        }
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
            buildConfigField "String", "LIBRARY_VERSION", "\"${objcdp.getVersionWithHash()}\""
        }
        compat {
            buildConfigField "String", "LIBRARY_VERSION", "\"${objcdp.getVersionWithHash()}\""
        }
    }
}

dependencies {
    compile 'com.android.support:support-annotations:23.1.0'

    def blueLib = 'com.philips.cdp:shinelib:2.0.3'
    def commLib = 'com.philips.cdp:dicommClientLib:2.0.0'

    compatCompile project(":bluelib")
    compatCompile project(":commlib")
    compatCompile 'com.philips.cdp:cloudcontroller-api:2.0.2'
    compatCompile 'com.google.code.gson:gson:2.7'

    debugCompile blueLib
    debugCompile commLib

    releaseCompile blueLib
    releaseCompile commLib

    testCompile "org.mockito:mockito-core:1.9.5"
    testCompile 'info.cukes:cucumber-java:1.2.2'
    testCompile 'info.cukes:cucumber-junit:1.2.2'
}

/*
 * Copyright (c) 2015-2018 Koninklijke Philips N.V.
 * All rights reserved.
 */

apply plugin: 'com.github.jruby-gradle.base'

buildscript {
    dependencies {
        classpath builddeps.jruby_gradle
    }
}

import com.github.jrubygradle.JRubyExec
dependencies {
    jrubyExec rubygems
}

task runLocalizationScript(type: JRubyExec) {
    description 'Run localization ruby script to generated translations strings'
    group 'Localization'

    script "${getRootFolder()}/hor-productregistration-localization/Android/android_parse_csv_to_strings.rb"
    gemWorkDir "${System.properties['user.home']}/.gradle-jruby"
}

def getRootFolder() {
    // Triple double-quotes for the breaklines
    def rootFolder = """git rev-parse --show-toplevel""".execute().text.trim()

    print "RootFolder:  ${rootFolder}"

    return rootFolder
}

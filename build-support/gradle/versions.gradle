/*
 * Copyright (c) 2015-2018 Koninklijke Philips N.V.
 * All rights reserved.
 */
apply from: buildscript.sourceFile.parent + "/projectnames.gradle"
def static epochTime() {
    def env_epoch = System.getenv('EPOCH_TIME')
    long local_epoch = System.currentTimeMillis() / 1000
    def epoch = env_epoch != null ? env_epoch : local_epoch
    return epoch
}

ext.baseplatformversion = "1805.0"
ext.platformversion = baseplatformversion + "." + epochTime()
ext.platformversionsuffix = baseplatformversion + ".+"

ext.versions = [
        sdk                                 : 27,
        target                              : 27,
        minsdk                              : 23,
        buildtools                          : '27.0.3',
        support                             : '27.1.1',
        jacoco                              : '0.8.0',
        dagger                              : '2.16',
        renderscriptTargetApi               : 27,
        jacocoToolVersionForRobolectricTests: '0.7.6.201602180812',
        jacocoToolVersion                   : '0.7.4.201502262128',
        sourceCompatibility                 : 1.8,
        targetCompatibility                 : 1.8,
        mockito                             : '2.8.9', // Mockito and Powermock need to be upgraded in tandem, see: https://github.com/powermock/powermock/wiki/Mockito#supported-versions
        powermock                           : '1.7.4', // Mockito and Powermock need to be upgraded in tandem, see: https://github.com/powermock/powermock/wiki/Mockito#supported-versions
        robolectric                         : '3.8'
]

ext.builddeps = [
        bintrayplugin       : 'com.jfrog.bintray.gradle:gradle-bintray-plugin:1.8.4',
        buildinfoextractor  : 'org.jfrog.buildinfo:build-info-extractor-gradle:4.7.5',
        cdpSCM              : [group: 'com.philips.cdp', name: 'cdpSCM', version: '4.3.0', changing: true],
        googleservices      : 'com.google.gms:google-services:4.0.1', // Version 4.1.0 causes the build to fail in creating the dependency tree
        gradle              : 'com.android.tools.build:gradle:3.1.4',
        hockeyapp           : 'de.felixschulze.gradle:gradle-hockeyapp-plugin:3.6',
        jruby_gradle        : 'com.github.jruby-gradle:jruby-gradle-plugin:1.6.0',
        mobilej             : 'de.mobilej.unmock:UnMockPlugin:0.6.5',
        trickyandroid       : 'com.trickyandroid:jacoco-everywhere:0.2.1',
        pitest              : 'pl.droidsonroids.gradle:gradle-pitest-plugin:0.1.7',
        pitest_solidsoft    : 'info.solidsoft.gradle.pitest:gradle-pitest-plugin:1.3.0',
        jacoco_android      : 'com.dicedmelon.gradle:jacoco-android:0.1.3',
        use_latest_versions : 'gradle.plugin.se.patrikerdes:gradle-use-latest-versions-plugin:0.2.3',
        ben_manes_versions  : 'com.github.ben-manes:gradle-versions-plugin:0.20.0'
]

ext.philipsdeps = [
        AppInfra                    : [group: 'com.philips.cdp', name: strings.ail.artifactName, version: platformversionsuffix, changing: true],
        AppInfraUApp                : [group: 'com.philips.cdp', name: strings.ailuapp.artifactName, version: platformversionsuffix, changing: true],
        bluelib                     : [group: 'com.philips.cdp', name: strings.bll.artifactName, version: platformversionsuffix, changing: true],
        bluelib_demouapp            : [group: 'com.philips.cdp', name: strings.blluapp.artifactName, version: platformversionsuffix, changing: true],
        catk                        : [group: 'com.philips.cdp', name: strings.catk.artifactName, version: platformversionsuffix, changing: true],
        cloudcontroller             : [group: 'com.philips.cdp', name: strings.clc.artifactName, version: platformversionsuffix, changing: true],
        cloudcontroller_api         : [group: 'com.philips.cdp', name: strings.cca.artifactName, version: platformversionsuffix, changing: true],
        commlib                     : [group: 'com.philips.cdp', name: strings.cml.artifactName, version: platformversionsuffix, changing: true],
        commlib_ble                 : [group: 'com.philips.cdp', name: strings.cmlble.artifactName, version: platformversionsuffix, changing: true],
        commlib_cloud               : [group: 'com.philips.cdp', name: strings.ccl.artifactName, version: platformversionsuffix, changing: true],
        commlib_lan                 : [group: 'com.philips.cdp', name: strings.cmllan.artifactName, version: platformversionsuffix, changing: true],
        commlib_api                 : [group: 'com.philips.cdp', name: strings.cmlapi.artifactName, version: platformversionsuffix, changing: true],
        commlib_demouapp            : [group: 'com.philips.cdp', name: strings.cmluapp.artifactName, version: platformversionsuffix, changing: true],
        csw                         : [group: 'com.philips.cdp', name: strings.csw.artifactName, version: platformversionsuffix, changing: true],
        dataServices                : [group: 'com.philips.cdp', name: strings.dsc.artifactName, version: platformversionsuffix, changing: true],
        dataServicesUApp            : [group: 'com.philips.cdp', name: strings.dscuapp.artifactName, version: platformversionsuffix, changing: true],
        devicepairingUApp           : [group: 'com.philips.cdp', name: strings.dpruapp.artifactName, version: platformversionsuffix, changing: true],
        digitalCare                 : [group: 'com.philips.cdp', name: strings.dcc.artifactName, version: platformversionsuffix, changing: true],
        digitalCareUApp             : [group: 'com.philips.cdp', name: strings.dccuapp.artifactName, version: platformversionsuffix, changing: true],
        ewsUApp                     : [group: 'com.philips.cdp', name: strings.ewsuapp.artifactName, version: platformversionsuffix, changing: true],
        ews_android                 : [group: 'com.philips.cdp', name: strings.ews.artifactName, version: platformversionsuffix, changing: true],
        iap                         : [group: 'com.philips.cdp', name: strings.iap.artifactName, version: platformversionsuffix, changing: true],
        iapUApp                     : [group: 'com.philips.cdp', name: strings.iapuapp.artifactName, version: platformversionsuffix, changing: true],
        IconFont                    : [group: 'com.philips.cdp', name: strings.icf.artifactName, version: platformversionsuffix, changing: true],
        jump                        : [group: 'com.philips.cdp', name: strings.jmp.artifactName, version: platformversionsuffix, changing: true],
        mya                         : [group: 'com.philips.cdp', name: strings.mya.artifactName, version: platformversionsuffix, changing: true],
        mya_chi                     : [group: 'com.philips.cdp', name: 'mya-chi', version: platformversionsuffix, changing: true],
        NeuraUApp                   : [group: 'com.philips.cdp', name: strings.neurauapp.artifactName, version: platformversionsuffix, changing: true],
        pif                         : [group: 'com.philips.cdp', name: strings.pif.artifactName, version: platformversionsuffix, changing: true],
        pluginreferenceboard        : [group: 'com.philips.cdp', name: strings.prf.artifactName, version: platformversionsuffix, changing: true],
        productselection            : [group: 'com.philips.cdp', name: strings.pse.artifactName, version: platformversionsuffix, changing: true],
        prx                         : [group: 'com.philips.cdp', name: strings.prx.artifactName, version: platformversionsuffix, changing: true],
        product_registration_libUApp: [group: 'com.philips.cdp', name: strings.prguapp.artifactName, version: platformversionsuffix, changing: true],
        product_registration_lib    : [group: 'com.philips.cdp', name: strings.prg.artifactName, version: platformversionsuffix, changing: true],
        pushnotification            : [group: 'com.philips.cdp', name: strings.pnf.artifactName, version: platformversionsuffix, changing: true],
        registrationApi             : [group: 'com.philips.cdp', name: strings.usr.artifactName, version: platformversionsuffix, changing: true],
        securedblibrary             : [group: 'com.philips.cdp', name: strings.sdb.artifactName, version: platformversionsuffix, changing: true],
        telehealth                  : [group: 'com.philips.cdp', name: strings.ths.artifactName, version: platformversionsuffix, changing: true],
        telehealthUApp              : [group: 'com.philips.cdp', name: strings.thsuapp.artifactName, version: platformversionsuffix, changing: true],
        themesettings               : [group: 'com.philips.cdp', name: strings.tse.artifactName, version: platformversionsuffix, changing: true],
        uAppFwLib                   : [group: 'com.philips.cdp', name: strings.ufw.artifactName, version: platformversionsuffix, changing: true],
        uAppFwLibUApp               : [group: 'com.philips.cdp', name: strings.ufwuapp.artifactName, version: platformversionsuffix, changing: true],
        uid                         : [group: 'com.philips.cdp', name: strings.uid.artifactName, version: platformversionsuffix, changing: true],
        uikitLib                    : [group: 'com.philips.cdp', name: strings.uit.artifactName, version: platformversionsuffix, changing: true],
        UserRegistrationUApp        : [group: 'com.philips.cdp', name: strings.usruapp.artifactName, version: platformversionsuffix, changing: true]
]

ext.repos = [
        base: 'http://artifactory-ehv.ta.philips.com:8082/artifactory',
]

ext.repos.jcenter = ext.repos.base + "/platform-jcenter-remote"
ext.repos.plugin = ext.repos.base + "/platform-plugins-release-local"
ext.repos.release = ext.repos.base + "/platform-pkgs-android-release"
ext.repos.releaseexternal = ext.repos.base + "/platform-plugins-release-local"
ext.repos.snapshot = ext.repos.base + "/platform-pkgs-android-snapshot"
ext.repos.snapshot_local = ext.repos.base + "/platform-pkgs-android-snapshot-local"
ext.repos.stage = ext.repos.base + "/platform-pkgs-android-stage"
ext.repos.mavengoogle = ext.repos.base + "/platform-maven-google-com"
ext.repos.pluginsgradle = ext.repos.base + "/CDP2_Plugins_Gradle"

ext.deps = [
        adobemobilelib                : 'com.adobe.mobile:adobeMobileLibrary:4.16.1',
        americanwell                  : 'com.americanwell:awsdk:3.2.2', // Held at 3.x.x since newest release is 4.x.x and has API breakers
        butterknife                   : 'com.jakewharton:butterknife:8.8.1',
        calligraphy                   : 'uk.co.chrisjenx:calligraphy:2.3.0',
        constraintlayout              : 'com.android.support.constraint:constraint-layout:1.1.3',
        commons_io                    : [group: 'commons-io', name: 'commons-io', version: '2.6'],
        dagger                        : [
                androidprocessor: "com.google.dagger:dagger-android-processor:${ext.versions.dagger}",
                androidsupport  : "com.google.dagger:dagger-android-support:${ext.versions.dagger}",
                compiler        : "com.google.dagger:dagger-compiler:${ext.versions.dagger}",
                dagger          : "com.google.dagger:dagger:${ext.versions.dagger}"
        ],
        facebook                      : 'com.facebook.android:facebook-login:4.36.0',
        firebase_messaging            : 'com.google.firebase:firebase-messaging:17.3.1',
        firebase_core                 : 'com.google.firebase:firebase-core:16.0.3',
        firebase_config               : 'com.google.firebase:firebase-config:16.0.0',
        firebase_iid                  : 'com.google.firebase:firebase-iid:17.0.1',
        glide                         : 'com.github.bumptech.glide:glide:3.7.0',
        greenrobot                    : 'org.greenrobot:eventbus:3.1.1',
        groovy                        : 'org.codehaus.groovy:groovy-all:2.5.0',
        gson                          : 'com.google.code.gson:gson:2.8.5',
        javax_annotation              : 'javax.annotation:javax.annotation-api:1.3.2',
        javax_inject                  : 'javax.inject:javax.inject:1',
        joda_time                     : 'joda-time:joda-time:2.10',
        json                          : 'org.json:json:20180813',
        jsr305                        : 'com.google.code.findbugs:jsr305:3.0.2',
        leakcanary                    : 'com.squareup.leakcanary:leakcanary-android:1.6.1',
        leakcanary_no_op              : 'com.squareup.leakcanary:leakcanary-android-no-op:1.6.1',
        livedata                      : 'android.arch.lifecycle:livedata:1.1.1',
        livedata_compiler             : 'android.arch.lifecycle:compiler:1.1.1',
        okhttp                        : 'com.squareup.okhttp:okhttp:2.7.5',
        okhttp3                       : 'com.squareup.okhttp3:okhttp:3.11.0',
        okhttp_apache3                : 'com.squareup.okhttp3:okhttp-apache:3.11.0',
        ormlite                       : [
                android: "com.j256.ormlite:ormlite-android:5.1",
                core   : "com.j256.ormlite:ormlite-core:5.1"
        ],
        play_services_maps            : 'com.google.android.gms:play-services-maps:15.0.1',
        retrofit                      : 'com.squareup.retrofit2:retrofit:2.4.0',
        retrofit1                     : 'com.squareup.retrofit:retrofit:1.9.0',
        room_runtime                  : 'android.arch.persistence.room:runtime:1.1.1',
        room_compiler                 : 'android.arch.persistence.room:compiler:1.1.1',
        shamanland_fonticon           : 'com.shamanland:fonticon:0.1.9',
        spoon_gradle_plugin           : 'com.stanfy.spoon:spoon-gradle-plugin:1.2.2',
        sqlcipher                     : 'net.zetetic:android-database-sqlcipher:3.5.9',
        support                       : [
                animvecdraw  : "com.android.support:animated-vector-drawable:${ext.versions.support}",
                annotations  : "com.android.support:support-annotations:${ext.versions.support}",
                appcompatv7  : "com.android.support:appcompat-v7:${ext.versions.support}",
                cardview     : "com.android.support:cardview-v7:${ext.versions.support}",
                customtabs   : "com.android.support:customtabs:${ext.versions.support}",
                design       : "com.android.support:design:${ext.versions.support}",
                fragment     : "com.android.support:support-fragment:${ext.versions.support}",
                recyclerview : "com.android.support:recyclerview-v7:${ext.versions.support}",
                supportv4    : "com.android.support:support-v4:${ext.versions.support}",
                supportcompat: "com.android.support:support-compat:${ext.versions.support}"
        ],
        theneura                      : 'com.theneura:android-sdk:5.1.5', // Held at 5.1.5 since 5.2.1 was compiled against Android SDK 28 causing a ProGuard warning
        uiautomator                   : 'com.android.support.test.uiautomator:uiautomator-v18:2.1.3',
        volley                        : 'com.android.volley:volley:1.1.1',
        wechat                        : 'com.tencent.mm.opensdk:wechat-sdk-android-with-mta:5.1.4', // Held at 5.1.4 since 5.1.6 introduces an API breaker

        // Testing
        android_test_commons          : 'org.apache.commons:commons-lang3:3.8',
        android_testrules             : 'com.android.support.test:rules:1.0.2',
        android_testrunner            : 'com.android.support.test:runner:1.0.2',
        androidJUnitRunner            : 'android.support.test.runner.AndroidJUnitRunner',
        apache                        : 'org.apache.http.legacy:org.apache.http.legacy:1.0.0',
        assertj                       : 'com.squareup.assertj:assertj-android:1.2.0',
        butterknife_compiler          : 'com.jakewharton:butterknife-compiler:8.8.1',
        butterknife_gradle            : 'com.jakewharton:butterknife-gradle-plugin:8.4.0', // Held at 8.4.0 since 8.8.1 is giving an issue, see: https://github.com/JakeWharton/butterknife/issues/1130
        cucumber_java                 : 'io.cucumber:cucumber-java:3.0.2',
        cucumber_junit                : 'io.cucumber:cucumber-junit:3.0.2',
        dexmaker_mockito              : 'com.linkedin.dexmaker:dexmaker-mockito:2.12.1', // Compiled against sdk 25
        espresso_contrib              : 'com.android.support.test.espresso:espresso-contrib:3.0.2',
        espresso_core                 : 'com.android.support.test.espresso:espresso-core:3.0.2',
        espresso_web                  : 'com.android.support.test.espresso:espresso-web:3.0.2',
        immutables                    : 'org.immutables:value:2.7.1',
        jackson_annotations           : 'com.fasterxml.jackson.core:jackson-annotations:2.9.6',
        jackson_core                  : 'com.fasterxml.jackson.core:jackson-core:2.9.6',
        jackson_databind              : 'com.fasterxml.jackson.core:jackson-databind:2.9.6',
        junit                         : 'junit:junit:4.12',
        junit_runners                 : 'com.nitorcreations:junit-runners:1.3',
        libphonenumber                : 'com.googlecode.libphonenumber:libphonenumber:8.9.13',
        mockito                       : "org.mockito:mockito-core:${ext.versions.mockito}",
        mockito_android               : "org.mockito:mockito-android:${ext.versions.mockito}",
        multidex                      : 'com.android.support:multidex:1.0.3',
        opengl                        : 'org.khronos:opengl-api:gl1.1-android-2.1_r1',
        openid_appauth                : 'net.openid:appauth:0.7.1',
        play_services_gcm             : 'com.google.android.gms:play-services-gcm:15.0.1',
        play_services_location        : 'com.google.android.gms:play-services-location:15.0.1',
        play_services_awareness       : 'com.google.android.gms:play-services-awareness:15.0.1',
        powermock_api_mockito         : "org.powermock:powermock-api-mockito2:${ext.versions.powermock}",
        powermock_classloading_xstream: "org.powermock:powermock-classloading-xstream:${ext.versions.powermock}",
        powermock_core                : "org.powermock:powermock-core:${ext.versions.powermock}",
        powermock_junit               : "org.powermock:powermock-module-junit4:${ext.versions.powermock}",
        powermock_junit_rule          : "org.powermock:powermock-module-junit4-rule:${ext.versions.powermock}",
        powermock_junit_rule_agent    : "org.powermock:powermock-module-junit4-rule-agent:${ext.versions.powermock}",
        retrolambda                   : 'net.orfjackal.retrolambda:retrolambda:2.5.4',
        retrolambda_gradle            : 'me.tatarka:gradle-retrolambda:3.7.0',
        robolectric                   : "org.robolectric:robolectric:${ext.versions.robolectric}",
        robolectric_junit             : "org.robolectric:junit:${ext.versions.robolectric}",
        robolectric_shadows           : "org.robolectric:shadows-supportv4:${ext.versions.robolectric}",
        robolectric_shadows_multidex  : "org.robolectric:shadows-multidex:${ext.versions.robolectric}",
        robolectric_utils             : "org.robolectric:utils:${ext.versions.robolectric}",
        rubygems                      : 'rubygems:roo:2.7.1',
        rxbinding                     : 'com.jakewharton.rxbinding2:rxbinding:2.1.1',
        rxjava2                       : 'io.reactivex.rxjava2:rxandroid:2.1.0',
        squareup_okio                 : 'com.squareup.okio:okio:2.0.0',
        stetho                        : 'com.facebook.stetho:stetho:1.5.0',
        testing_support               : 'com.android.support.test:testing-support-lib:0.1'
]

/*
 * define versions for all dependencies.
 */
apply from: buildscript.sourceFile.parent + "/projectnames.gradle"

// method to append time stamp for platform builds
def static epochTime() {
    def env_epoch = System.getenv('EPOCH_TIME')
    long local_epoch = System.currentTimeMillis() / 1000
    def epoch = env_epoch != null ? env_epoch : local_epoch
    return epoch
}


ext.baseplatformversion = "2001.1" //platform initial version
ext.platformversion = baseplatformversion + "." + epochTime() // platform initial version appended with current timestamp.
ext.platformversionsuffix = baseplatformversion + ".+"

/**
 * Android tools and environment versions
 */
ext.versions = [
        sdk                                 : 29,
        target                              : 29,
        minsdk                              : 23,
        buildtools                          : '29.0.2',
        jacoco                              : '0.8.0',
        dagger                              : '2.26',
        renderscriptTargetApi               : 27,
        jacocoToolVersionForRobolectricTests: '0.7.6.201602180812',
        jacocoToolVersion                   : '0.7.4.201502262128',
        sourceCompatibility                 : 1.8,
        targetCompatibility                 : 1.8,
        mockito                             : '2.8.9', // Mockito and Powermock need to be upgraded in tandem, see: https://github.com/powermock/powermock/wiki/Mockito#supported-versions
        powermock                           : '1.7.4', // Mockito and Powermock need to be upgraded in tandem, see: https://github.com/powermock/powermock/wiki/Mockito#supported-versions
        robolectric                         : '4.3',
]

/**
 * external build dependencies with versions
 */
ext.builddeps = [
        bintrayplugin      : 'com.jfrog.bintray.gradle:gradle-bintray-plugin:1.8.4',
        buildinfoextractor : 'org.jfrog.buildinfo:build-info-extractor-gradle:4.7.5',
        cdpSCM             : [group: 'com.philips.platform', name: 'scmPlugin', version: '4.3.1', changing: false],
        googleservices     : 'com.google.gms:google-services:4.0.1', // Version 4.1.0 causes the build to fail in creating the dependency tree
        gradle             : 'com.android.tools.build:gradle:3.5.3',
        hockeyapp          : 'de.felixschulze.gradle:gradle-hockeyapp-plugin:3.6',
        jruby_gradle       : 'com.github.jruby-gradle:jruby-gradle-plugin:1.6.0',
        kotlin_plugin    : 'org.jetbrains.kotlin:kotlin-gradle-plugin:1.3.50',
        mobilej            : 'de.mobilej.unmock:UnMockPlugin:0.6.5',
        trickyandroid      : 'com.trickyandroid:jacoco-everywhere:0.2.1',
        pitest             : 'pl.droidsonroids.gradle:gradle-pitest-plugin:0.1.7',
        pitest_solidsoft   : 'info.solidsoft.gradle.pitest:gradle-pitest-plugin:1.3.0',
        jacoco_android     : 'com.dicedmelon.gradle:jacoco-android:0.1.3',
        use_latest_versions: 'gradle.plugin.se.patrikerdes:gradle-use-latest-versions-plugin:0.2.3',
        ben_manes_versions : 'com.github.ben-manes:gradle-versions-plugin:0.20.0'
]

/**
 * philips build dependencies with versions
 */
ext.philipsdeps = [
        AppInfra                    : [group: 'com.philips.platform', name: strings.ail.artifactName, version: platformversionsuffix, changing: true],
        AppInfraUApp                : [group: 'com.philips.platform', name: strings.ailuapp.artifactName, version: platformversionsuffix, changing: true],
        csw                         : [group: 'com.philips.platform', name: strings.csw.artifactName, version: '1901.0.+', changing: true],
        digitalCare                 : [group: 'com.philips.platform', name: strings.dcc.artifactName, version: platformversionsuffix, changing: true],
        digitalCareUApp             : [group: 'com.philips.platform', name: strings.dccuapp.artifactName, version: platformversionsuffix, changing: true],
        iap                         : [group: 'com.philips.platform', name: strings.iap.artifactName, version: platformversionsuffix, changing: true],
        iapUApp                     : [group: 'com.philips.platform', name: strings.iapuapp.artifactName, version: platformversionsuffix, changing: true],
        pif                         : [group: 'com.philips.platform', name: strings.pif.artifactName, version: platformversionsuffix, changing: true],
        productselection            : [group: 'com.philips.platform', name: strings.pse.artifactName, version: platformversionsuffix, changing: true],
        prx                         : [group: 'com.philips.platform', name: strings.prx.artifactName, version: platformversionsuffix, changing: true],
        product_registration_libUApp: [group: 'com.philips.platform', name: strings.prguapp.artifactName, version: platformversionsuffix, changing: true],
        product_registration_lib    : [group: 'com.philips.platform', name: strings.prg.artifactName, version: platformversionsuffix, changing: true],
        registrationApi             : [group: 'com.philips.platform', name: strings.usr.artifactName, version: platformversionsuffix, changing: true],
        securedblibrary             : [group: 'com.philips.platform', name: strings.sdb.artifactName, version: platformversionsuffix, changing: true],
        themesettings               : [group: 'com.philips.platform', name: strings.tse.artifactName, version: platformversionsuffix, changing: true],
        uAppFwLib                   : [group: 'com.philips.platform', name: strings.ufw.artifactName, version: platformversionsuffix, changing: true],
        uid                         : [group: 'com.philips.hsdp-cp', name: strings.uid.artifactName, version: '3.0.+', changing: true],
        pim                         : [group: 'com.philips.platform', name: strings.pim.artifactName, version: platformversionsuffix, changing: true],
        pimUApp                     : [group: 'com.philips.platform', name: strings.pimuapp.artifactName, version: platformversionsuffix, changing: true],
        UserRegistrationUApp        : [group: 'com.philips.platform', name: strings.usruapp.artifactName, version: platformversionsuffix, changing: true],
        philipsecommercesdk         : [group: 'com.philips.platform', name: strings.ecs.artifactName, version: platformversionsuffix, changing: true],
        ecsUapp                     : [group: 'com.philips.platform', name: strings.ecsuapp.artifactName, version: platformversionsuffix, changing: true],
        mec                         : [group: 'com.philips.platform', name: strings.mec.artifactName, version: platformversionsuffix, changing: true],
        mecUApp                     : [group: 'com.philips.platform', name: strings.mecuapp.artifactName, version: platformversionsuffix, changing: true]
]

/**
 * base url of artifactory repo
 */
ext.repos = [
        base: 'https://artifactory-ehv.ta.philips.com/artifactory',
]

/**
 * repositories urls
 */
ext.repos.jcenter = ext.repos.base + "/platform-jcenter-remote"
ext.repos.plugin = ext.repos.base + "/platform-plugins-release-local"
ext.repos.mavengoogle = ext.repos.base + "/platform-maven-google-com"
ext.repos.pluginsgradle = ext.repos.base + "/CDP2_Plugins_Gradle"
ext.repos.ietsnapshot = ext.repos.base + "/iet-mobile-android-snapshot-local"
ext.repos.ietrelease = ext.repos.base + "/iet-mobile-android-release-local"
ext.repos.hsdprelease = ext.repos.base + "/HSDP-pkgs-android-release"

/**
 * third-party library dependencies with versions
 */
ext.deps = [
        adobemobilelib                : 'com.adobe.mobile:adobeMobileLibrary:4.18.0',
        jump                          : 'com.janrain.android:jump-android:7.1.1',   //Consuming from the forked version of jump in azure repo.
        butterknife                   : 'com.jakewharton:butterknife:10.2.1',
        bazaarvoice                   : 'com.bazaarvoice.bvandroidsdk:conversations:8.5.1',
        calligraphy                   : 'io.github.inflationx:calligraphy3:3.1.1',
        viewpump                      : 'io.github.inflationx:viewpump:2.0.3',
        dagger                        : [
                compiler: "com.google.dagger:dagger-compiler:${ext.versions.dagger}",
                dagger  : "com.google.dagger:dagger:${ext.versions.dagger}"
        ],
        facebook                      : 'com.facebook.android:facebook-login:6.1.0',
        firebase_core                 : 'com.google.firebase:firebase-core:17.2.2',
        firebase_config               : 'com.google.firebase:firebase-config:19.1.1',
        firebase_iid                  : 'com.google.firebase:firebase-iid:20.0.2',
        glide                         : 'com.github.bumptech.glide:glide:4.11.0',
        greenrobot                    : 'org.greenrobot:eventbus:3.2.0',
        gson                          : 'com.google.code.gson:gson:2.8.6',
        javax_annotation              : 'javax.annotation:javax.annotation-api:1.3.2',
        javax_inject                  : 'javax.inject:javax.inject:1',
        joda_time                     : 'joda-time:joda-time:2.10.5',
        json                          : 'org.json:json:20190722',
        jsr305                        : 'com.google.code.findbugs:jsr305:3.0.2',
        kotlin_stdlib_jdk7            : 'org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.3.50',
        kotlin_test                   : 'org.jetbrains.kotlin:kotlin-test:1.3.50',
        databinding_compiler          : 'android.databinding:databinding-compiler:1.3.50',
        kotlinx_coroutines_core       : 'org.jetbrains.kotlinx:kotlinx-coroutines-android:1.1.1',
        leakcanary                    : 'com.squareup.leakcanary:leakcanary-android:1.6.3',
        leakcanary_no_op              : 'com.squareup.leakcanary:leakcanary-android-no-op:1.6.3',
        okhttp                        : 'com.squareup.okhttp:okhttp:2.7.5',
        ormlite                       : [
                android: "com.j256.ormlite:ormlite-android:5.1",
                core   : "com.j256.ormlite:ormlite-core:5.1"
        ],
        play_services_maps            : 'com.google.android.gms:play-services-maps:17.0.0',
        shamanland_fonticon           : 'com.shamanland:fonticon:0.1.9',
        sqlcipher                     : 'net.zetetic:android-database-sqlcipher:4.3.0',
        androidx                      : [
                annotations          : "androidx.annotation:annotation:1.1.0",
                appcompat            : "androidx.appcompat:appcompat:1.2.0-alpha02",
                cardview             : "androidx.cardview:cardview:1.1.0",
                customtabs           : "androidx.browser:browser:1.3.0-alpha01",
                recyclerview         : "androidx.recyclerview:recyclerview:1.2.0-alpha01",
                livedata             : 'androidx.lifecycle:lifecycle-livedata:2.2.0',
                livedata_compiler    : 'androidx.lifecycle:lifecycle-compiler:2.2.0',
                livedata_extensions  : 'androidx.lifecycle:lifecycle-extensions:2.2.0',
                constraintlayout     : 'androidx.constraintlayout:constraintlayout:2.0.0-beta4',
                localbroadcastmanager: "androidx.localbroadcastmanager:localbroadcastmanager:1.0.0",
                rules                : "androidx.test:rules:1.3.0-alpha04",
                runner               : "androidx.test:runner:1.3.0-alpha04",
                monitor              : "androidx.test:monitor:1.3.0-alpha04",
                room_runtime         : "androidx.room:room-runtime:2.2.4",
                room_compiler        : "androidx.room:room-compiler:2.2.4",
                uiautomator          : 'androidx.test.uiautomator:uiautomator:2.2.0',
                espresso_contrib     : 'androidx.test.espresso:espresso-contrib:3.3.0-alpha04',
                espresso_core        : 'androidx.test.espresso:espresso-core:3.3.0-alpha04',
                espresso_web         : 'androidx.test.espresso:espresso-web:3.3.0-alpha04',
                multidex             : 'androidx.multidex:multidex:2.0.1',
                fragment_testing     : "androidx.fragment:fragment-testing:1.2.2"
        ],

        design                        : "com.google.android.material:material:1.2.0-alpha05",
        volley                        : 'com.android.volley:volley:1.1.1',
        wechat                        : 'com.tencent.mm.opensdk:wechat-sdk-android-with-mta:5.4.0',
        apache_commons_lang           : 'org.apache.commons:commons-lang3:3.9',
        assertj                       : 'com.squareup.assertj:assertj-android:1.2.0',
        butterknife_compiler          : 'com.jakewharton:butterknife-compiler:10.2.1',
        butterknife_gradle            : 'com.jakewharton:butterknife-gradle-plugin:10.2.1', // Held at 8.4.0 since 10.0.0 is giving an issue

        dexmaker_mockito              : 'com.linkedin.dexmaker:dexmaker-mockito:2.25.1', // Compiled against sdk 25

        immutables                    : 'org.immutables:value:2.8.3',
        jackson_annotations           : 'com.fasterxml.jackson.core:jackson-annotations:2.10.2',
        jackson_core                  : 'com.fasterxml.jackson.core:jackson-core:2.10.2',
        jackson_databind              : 'com.fasterxml.jackson.core:jackson-databind:2.10.2',
        junit                         : 'junit:junit:4.13',
        libphonenumber                : 'com.googlecode.libphonenumber:libphonenumber:8.11.4',
        mockito                       : "org.mockito:mockito-core:${ext.versions.mockito}",
        mockito_android               : "org.mockito:mockito-android:${ext.versions.mockito}",
        opengl                        : 'org.khronos:opengl-api:gl1.1-android-2.1_r1',
        openid_appauth                : 'net.openid:appauth:0.7.1',
        powermock_api_mockito         : "org.powermock:powermock-api-mockito2:${ext.versions.powermock}",
        powermock_classloading_xstream: "org.powermock:powermock-classloading-xstream:${ext.versions.powermock}",
        powermock_core                : "org.powermock:powermock-core:${ext.versions.powermock}",
        powermock_junit               : "org.powermock:powermock-module-junit4:${ext.versions.powermock}",
        powermock_junit_rule          : "org.powermock:powermock-module-junit4-rule:${ext.versions.powermock}",
        powermock_junit_rule_agent    : "org.powermock:powermock-module-junit4-rule-agent:${ext.versions.powermock}",
        retrolambda_gradle            : 'me.tatarka:gradle-retrolambda:3.7.1',
        robolectric                   : "org.robolectric:robolectric:4.3.1",
        robolectric_junit             : "org.robolectric:junit:4.3.1",
        robolectric_shadows           : "org.robolectric:shadows-supportv4:4.3.1",
        robolectric_shadows_multidex  : "org.robolectric:shadows-multidex:4.3.1",
        robolectric_utils             : "org.robolectric:utils:4.3.1",
        rubygems                      : 'rubygems:roo:2.8.3',
        rxbinding                     : 'com.jakewharton.rxbinding2:rxbinding:2.2.0',
        rxjava2                       : 'io.reactivex.rxjava2:rxandroid:2.1.1'
]
